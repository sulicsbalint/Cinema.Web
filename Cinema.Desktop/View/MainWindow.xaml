<Window x:Class="Cinema.Desktop.View.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:local="clr-namespace:Cinema.Desktop.View"
        mc:Ignorable="d"
        Title="Filmszínház" Height="450" Width="800">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="ContentRendered">
            <i:InvokeCommandAction Command="{Binding RefreshMoviesCommand}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="Filmek frissítése" Command="{Binding RefreshMoviesCommand}" />
            <MenuItem Header="Kijelentkezés" Command="{Binding LogoutCommand}" />
        </Menu>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="3*" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="3*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <GroupBox Grid.Row="0">
                <GroupBox.Header>
                    <Label Content="Filmek:" />
                </GroupBox.Header>
                <DataGrid ItemsSource="{Binding Movies}"
                      VerticalContentAlignment="Stretch"  IsReadOnly="True"
                      AutoGenerateColumns="False" HeadersVisibility="None"
                      SelectedItem="{Binding SelectedMovie}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="SelectionChanged">
                            <i:InvokeCommandAction Command="{Binding SelectCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <DataGrid.Columns>
                        <DataGridTextColumn Binding="{Binding Title}" Width="*" />
                    </DataGrid.Columns>
                </DataGrid>
            </GroupBox>
            <StackPanel Grid.Row="1" Orientation="Horizontal">
                <Button Width="Auto"  Height="21" Margin="5" Content="Film hozzáadása" Command="{Binding AddMovieCommand}" />
                <Button Width="Auto"  Height="21" Margin="5" Content="Film szerkesztése" Command="{Binding EditMovieCommand}" />
                <Button Width="Auto"  Height="21" Margin="5" Content="Film törlése" Command="{Binding DeleteMovieCommand}" />
            </StackPanel>
            <GroupBox Grid.Row="2">
                <GroupBox.Header>
                    <Label Content="Előadások:" />
                </GroupBox.Header>
                <DataGrid ItemsSource="{Binding Screenings}" 
                      VerticalContentAlignment="Stretch" IsReadOnly="True"
                      AutoGenerateColumns="False" 
                      SelectedItem="{Binding SelectedScreening}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="SelectionChanged">
                            <i:InvokeCommandAction Command="{Binding SelectScreeningCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Kezdés" Binding="{Binding StartTime}" />
                        <DataGridTextColumn Header="Film" Binding="{Binding MovieId}" />
                        <DataGridTextColumn Header="Terem" Binding="{Binding RoomId}" />
                    </DataGrid.Columns>
                </DataGrid>
            </GroupBox>
            <StackPanel Grid.Row="3" Orientation="Horizontal">
                <Button Width="Auto"  Height="21" Margin="5" Content="Előadás hozzáadása" Command="{Binding AddScreeningCommand}" />
                <Button Width="Auto"  Height="21" Margin="5" Content="Előadás szerkesztése" Command="{Binding EditScreeningCommand}" />
                <Button Width="Auto"  Height="21" Margin="5" Content="Előadás törlése" Command="{Binding DeleteScreeningCommand}" />
            </StackPanel>
        </Grid>
    </DockPanel>
</Window>
